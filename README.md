# ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ ÑÐ¼ÐµÐ½Ñ‰Ð¸Ðº emoji-ÑÑ‚Ð°Ñ‚ÑƒÑÐ° Ð² Telegram Ð¿Ð¾ Ñ€Ð°ÑÐ¿Ð¸ÑÐ°Ð½Ð¸ÑŽ

ÐŸÑ€Ð¸Ð²ÐµÑ‚! ðŸ˜Š Ð­Ñ‚Ð¾ Ð¿Ñ€Ð¾ÑÑ‚Ð¾Ð¹ Ð¿Ñ€Ð¾ÐµÐºÑ‚, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ Ð¼ÐµÐ½ÑÐµÑ‚ ÑÐ¼Ð¾Ð´Ð·Ð¸-ÑÑ‚Ð°Ñ‚ÑƒÑ Ð² Ñ‚Ð²Ð¾Ñ‘Ð¼ Ð¿Ñ€Ð¾Ñ„Ð¸Ð»Ðµ Telegram (ÐµÑÐ»Ð¸ Ñƒ Ñ‚ÐµÐ±Ñ Premium-Ð°ÐºÐºÐ°ÑƒÐ½Ñ‚) Ð² Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸ Ð¾Ñ‚ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð¸ ÑÑƒÑ‚Ð¾Ðº, ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ð¹ (Ñ‚Ð¸Ð¿Ð° Ð·Ð°Ð²Ñ‚Ñ€Ð°ÐºÐ° Ð¸Ð»Ð¸ Ð¿ÑƒÑ‚Ð¸ Ð½Ð° Ñ€Ð°Ð±Ð¾Ñ‚Ñƒ) Ð¸ Ð²Ñ‹Ñ…Ð¾Ð´Ð½Ñ‹Ñ…. ÐÐ°Ð¿Ñ€Ð¸Ð¼ÐµÑ€:

Ð£Ñ‚Ñ€Ð¾Ð¼ â€” â˜• (ÐºÐ¾Ñ„Ðµ)
Ð’ Ð¿ÑƒÑ‚Ð¸ â€” ðŸš— (Ð¼Ð°ÑˆÐ¸Ð½Ð°)
ÐÐ° Ð²Ñ‹Ñ…Ð¾Ð´Ð½Ñ‹Ñ… â€” ðŸ–ï¸ (Ð¿Ð»ÑÐ¶)

Ð’ÑÑ‘ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ Ð½Ð° Ð±ÐµÑÐ¿Ð»Ð°Ñ‚Ð½Ð¾Ð¼ ÑÐµÑ€Ð²ÐµÑ€Ðµ (Railway), Ð¸ Ð½Ðµ Ð½ÑƒÐ¶Ð½Ð¾ Ð½Ð¸Ñ‡ÐµÐ³Ð¾ ÑƒÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°Ñ‚ÑŒ Ð½Ð° ÐºÐ¾Ð¼Ð¿ÑŒÑŽÑ‚ÐµÑ€. ÐŸÑ€Ð¾ÐµÐºÑ‚ ÑÐ°Ð¼ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÐµÑ‚ Ð²Ñ€ÐµÐ¼Ñ ÐºÐ°Ð¶Ð´Ñ‹Ðµ 10 Ð¼Ð¸Ð½ÑƒÑ‚ Ð¸ Ð¼ÐµÐ½ÑÐµÑ‚ ÑÑ‚Ð°Ñ‚ÑƒÑ.
Ð­Ñ‚Ð¾ Ñ€ÑƒÐºÐ¾Ð²Ð¾Ð´ÑÑ‚Ð²Ð¾ Ð½Ð°Ð¿Ð¸ÑÐ°Ð½Ð¾ Ð¾Ñ‡ÐµÐ½ÑŒ Ð¿Ñ€Ð¾ÑÑ‚Ð¾, ÑˆÐ°Ð³ Ð·Ð° ÑˆÐ°Ð³Ð¾Ð¼, ÐºÐ°Ðº Ð´Ð»Ñ Ð½Ð¾Ð²Ð¸Ñ‡ÐºÐ° (Ð´Ð°Ð¶Ðµ ÐµÑÐ»Ð¸ Ñ‚Ñ‹ "Ð¿Ñ€Ð¾ÑÑ‚Ð°Ñ Ð´ÐµÐ²ÑƒÑˆÐºÐ°" Ð¸ Ð½Ðµ Ñ€Ð°Ð·Ð±Ð¸Ñ€Ð°ÐµÑˆÑŒÑÑ Ð² ÐºÐ¾Ð´Ðµ). Ð•ÑÐ»Ð¸ Ð·Ð°ÑÑ‚Ñ€ÑÐ½ÐµÑˆÑŒ â€” ÑÐ¿Ñ€Ð¾ÑÐ¸ Ð² Ñ‡Ð°Ñ‚Ðµ Ð¸Ð»Ð¸ Ñƒ Ð´Ñ€ÑƒÐ³Ð°. Ð’Ñ€ÐµÐ¼Ñ Ð½Ð° Ð²ÑÑ‘: 20â€“30 Ð¼Ð¸Ð½ÑƒÑ‚.
Ð§Ñ‚Ð¾ Ð¿Ð¾Ð½Ð°Ð´Ð¾Ð±Ð¸Ñ‚ÑÑ

ÐÐºÐºÐ°ÑƒÐ½Ñ‚ Ð² Telegram (Ñ Premium Ð´Ð»Ñ ÑÐ¼Ð¾Ð´Ð·Ð¸-ÑÑ‚Ð°Ñ‚ÑƒÑÐ°).
ÐÐºÐºÐ°ÑƒÐ½Ñ‚ Ð² GitHub (Ð±ÐµÑÐ¿Ð»Ð°Ñ‚Ð½Ð¾, Ð·Ð°Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ð¸Ñ€ÑƒÐ¹ÑÑ Ñ‡ÐµÑ€ÐµÐ· email Ð½Ð° github.com).
ÐÐºÐºÐ°ÑƒÐ½Ñ‚ Ð² Railway (Ð±ÐµÑÐ¿Ð»Ð°Ñ‚Ð½Ð¾, Ð·Ð°Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ð¸Ñ€ÑƒÐ¹ÑÑ Ñ‡ÐµÑ€ÐµÐ· GitHub Ð½Ð° railway.app).
Ð‘Ñ€Ð°ÑƒÐ·ÐµÑ€ (Chrome Ð¸Ð»Ð¸ Ð»ÑŽÐ±Ð¾Ð¹ Ð´Ñ€ÑƒÐ³Ð¾Ð¹).
ÐÐ¾Ð¼ÐµÑ€ Ñ‚ÐµÐ»ÐµÑ„Ð¾Ð½Ð° Telegram Ð´Ð»Ñ Ð°Ð²Ñ‚Ð¾Ñ€Ð¸Ð·Ð°Ñ†Ð¸Ð¸ (Ð¾Ð´Ð¸Ð½ Ñ€Ð°Ð·).

Ð’Ð°Ð¶Ð½Ð¾: Ð­Ñ‚Ð¾ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð´Ð»Ñ Ñ‚Ð²Ð¾ÐµÐ³Ð¾ Ð»Ð¸Ñ‡Ð½Ð¾Ð³Ð¾ Ð°ÐºÐºÐ°ÑƒÐ½Ñ‚Ð°. ÐÐµ Ð´ÐµÐ»Ð¸ ÐºÐ»ÑŽÑ‡Ð¸ Ñ Ð´Ñ€ÑƒÐ³Ð¸Ð¼Ð¸!
Ð¨Ð°Ð³ 1: ÐŸÐ¾Ð»ÑƒÑ‡Ð¸ API-ÐºÐ»ÑŽÑ‡Ð¸ Ð¾Ñ‚ Telegram (api_id Ð¸ api_hash)
Ð­Ñ‚Ð¾ ÐºÐ°Ðº "Ð¿Ð°ÑÐ¿Ð¾Ñ€Ñ‚" Ð´Ð»Ñ Ñ‚Ð²Ð¾ÐµÐ³Ð¾ Ð°ÐºÐºÐ°ÑƒÐ½Ñ‚Ð° Ð² Telegram API.

Ð—Ð°Ð¹Ð´Ð¸ Ð½Ð° https://my.telegram.org (Ð²Ð²ÐµÐ´Ð¸ ÑÐ²Ð¾Ð¹ Ð½Ð¾Ð¼ÐµÑ€ Ñ‚ÐµÐ»ÐµÑ„Ð¾Ð½Ð° Telegram Ð¸ ÐºÐ¾Ð´ Ð¸Ð· Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ).
ÐÐ°Ð¶Ð¼Ð¸ "API development tools" (Ð¸Ð»Ð¸ "Create new application").
Ð—Ð°Ð¿Ð¾Ð»Ð½Ð¸ Ñ„Ð¾Ñ€Ð¼Ñƒ (Ð½Ðµ ÑÑ‚Ñ€Ð°ÑˆÐ½Ð¾, Telegram Ð½Ðµ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÐµÑ‚ ÑÑ‚Ñ€Ð¾Ð³Ð¾):
App title: My Emoji Status Changer (Ð¸Ð»Ð¸ Ð»ÑŽÐ±Ð¾Ðµ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ðµ).
Short name: emojichanger (Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð°Ð½Ð³Ð»Ð¸Ð¹ÑÐºÐ¸Ðµ Ð±ÑƒÐºÐ²Ñ‹ Ð¸ Ñ†Ð¸Ñ„Ñ€Ñ‹, 5â€“32 ÑÐ¸Ð¼Ð²Ð¾Ð»Ð°).
URL: ÐžÑÑ‚Ð°Ð²ÑŒ Ð¿ÑƒÑÑ‚Ñ‹Ð¼.
Platform: Ð’Ñ‹Ð±ÐµÑ€Ð¸ "Android" Ð¸Ð»Ð¸ "Desktop".
Description: ÐžÑÑ‚Ð°Ð²ÑŒ Ð¿ÑƒÑÑ‚Ñ‹Ð¼ Ð¸Ð»Ð¸ Ð½Ð°Ð¿Ð¸ÑˆÐ¸ "Personal script for emoji status".

ÐÐ°Ð¶Ð¼Ð¸ "Create application".
Ð¡ÐºÐ¾Ð¿Ð¸Ñ€ÑƒÐ¹:
App api_id: Ð§Ð¸ÑÐ»Ð¾ (Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€, 1234567).
App api_hash: Ð”Ð»Ð¸Ð½Ð½Ð°Ñ ÑÑ‚Ñ€Ð¾ÐºÐ° (Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€, 0123456789abcdef...).

Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸ Ð¸Ñ… Ð² Ð±Ð»Ð¾ÐºÐ½Ð¾Ñ‚Ðµ â€” Ð¾Ð½Ð¸ Ð¿Ð¾Ð½Ð°Ð´Ð¾Ð±ÑÑ‚ÑÑ Ð¿Ð¾Ð·Ð¶Ðµ.

Ð•ÑÐ»Ð¸ Ð¾ÑˆÐ¸Ð±ÐºÐ° â€” Ð¿Ð¾Ð¿Ñ€Ð¾Ð±ÑƒÐ¹ Ð´Ñ€ÑƒÐ³Ð¾Ð¹ Ð±Ñ€Ð°ÑƒÐ·ÐµÑ€ Ð¸Ð»Ð¸ Ð±ÐµÐ· VPN.

Ð¨Ð°Ð³ 2: ÐŸÐ¾Ð»ÑƒÑ‡Ð¸ SESSION_STRING (Ð°Ð²Ñ‚Ð¾Ñ€Ð¸Ð·Ð°Ñ†Ð¸Ñ Ð°ÐºÐºÐ°ÑƒÐ½Ñ‚Ð°)
Ð­Ñ‚Ð¾ ÐºÐ°Ðº "ÐºÐ»ÑŽÑ‡" Ð¾Ñ‚ Ñ‚Ð²Ð¾ÐµÐ³Ð¾ Telegram-Ð°ÐºÐºÐ°ÑƒÐ½Ñ‚Ð° Ð´Ð»Ñ ÑÐºÑ€Ð¸Ð¿Ñ‚Ð°. Ð”ÐµÐ»Ð°ÐµÑ‚ÑÑ Ð¾Ð´Ð¸Ð½ Ñ€Ð°Ð·, Ð±ÐµÐ· ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ¸ Python.

Ð—Ð°Ð¹Ð´Ð¸ Ð½Ð° https://replit.com (Ð·Ð°Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ð¸Ñ€ÑƒÐ¹ÑÑ Ð±ÐµÑÐ¿Ð»Ð°Ñ‚Ð½Ð¾ Ñ‡ÐµÑ€ÐµÐ· email Ð¸Ð»Ð¸ GitHub).
ÐÐ°Ð¶Ð¼Ð¸ "+ Create Repl" â†’ Ð²Ñ‹Ð±ÐµÑ€Ð¸ "Python".
Ð’ Ñ„Ð°Ð¹Ð» main.py (ÑÐ»ÐµÐ²Ð°) Ð²ÑÑ‚Ð°Ð²ÑŒ ÑÑ‚Ð¾Ñ‚ ÐºÐ¾Ð´:

```
from telethon.sync import TelegramClient
from telethon.sessions import StringSession

api_id = Ð¢Ð’ÐžÐ™_API_ID_Ð˜Ð—_Ð¨ÐÐ“Ð_1  # Ð²ÑÑ‚Ð°Ð²ÑŒ Ñ‡Ð¸ÑÐ»Ð¾
api_hash = 'Ð¢Ð’ÐžÐ™_API_HASH_Ð˜Ð—_Ð¨ÐÐ“Ð_1'  # Ð²ÑÑ‚Ð°Ð²ÑŒ ÑÑ‚Ñ€Ð¾ÐºÑƒ Ð² ÐºÐ°Ð²Ñ‹Ñ‡ÐºÐ°Ñ…

client = TelegramClient(StringSession(), api_id, api_hash)
client.start()
print(client.session.save())

```

ÐÐ°Ð¶Ð¼Ð¸ Ð·ÐµÐ»Ñ‘Ð½ÑƒÑŽ ÐºÐ½Ð¾Ð¿ÐºÑƒ "Run" (Ð²Ð²ÐµÑ€Ñ…Ñƒ).
Ð’ ÐºÐ¾Ð½ÑÐ¾Ð»Ð¸ (ÑÐ¿Ñ€Ð°Ð²Ð°) Ð¿Ð¾Ð¿Ñ€Ð¾ÑÐ¸Ñ‚ Ð½Ð¾Ð¼ÐµÑ€ Ñ‚ÐµÐ»ÐµÑ„Ð¾Ð½Ð° â†’ Ð²Ð²ÐµÐ´Ð¸ ÑÐ²Ð¾Ð¹ Ð¸Ð· Telegram.
ÐŸÑ€Ð¸Ð´Ñ‘Ñ‚ ÐºÐ¾Ð´ Ð² Telegram â†’ Ð²Ð²ÐµÐ´Ð¸ ÐµÐ³Ð¾.
Ð’ ÐºÐ¾Ð½ÑÐ¾Ð»Ð¸ Ð¿Ð¾ÑÐ²Ð¸Ñ‚ÑÑ Ð¾Ñ‡ÐµÐ½ÑŒ Ð´Ð»Ð¸Ð½Ð½Ð°Ñ ÑÑ‚Ñ€Ð¾ÐºÐ° (Ñ‚Ð¸Ð¿Ð° "1AQw...") â€” ÑÐºÐ¾Ð¿Ð¸Ñ€ÑƒÐ¹ ÐµÑ‘ Ñ†ÐµÐ»Ð¸ÐºÐ¾Ð¼. Ð­Ñ‚Ð¾ SESSION_STRING.
Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸ Ð² Ð±Ð»Ð¾ÐºÐ½Ð¾Ñ‚Ðµ. Ð‘Ð¾Ð»ÑŒÑˆÐµ Replit Ð½Ðµ Ð½ÑƒÐ¶ÐµÐ½ (Ð¼Ð¾Ð¶Ð½Ð¾ ÑƒÐ´Ð°Ð»Ð¸Ñ‚ÑŒ Ð¿Ñ€Ð¾ÐµÐºÑ‚).

Ð•ÑÐ»Ð¸ Ð¾ÑˆÐ¸Ð±ÐºÐ° â€” ÑƒÐ±ÐµÐ´Ð¸ÑÑŒ, Ñ‡Ñ‚Ð¾ api_id Ð¸ api_hash Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ðµ.
Ð¨Ð°Ð³ 3: Ð¡Ð¾Ð·Ð´Ð°Ð¹ Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¹ Ð½Ð° GitHub Ð¸ Ð´Ð¾Ð±Ð°Ð²ÑŒ Ñ„Ð°Ð¹Ð»Ñ‹
GitHub â€” ÑÑ‚Ð¾ ÐºÐ°Ðº "Ð¿Ð°Ð¿ÐºÐ° Ð² Ð¾Ð±Ð»Ð°ÐºÐµ" Ð´Ð»Ñ ÐºÐ¾Ð´Ð°.

Ð—Ð°Ð¹Ð´Ð¸ Ð½Ð° github.com â†’ Ð½Ð°Ð¶Ð¼Ð¸ "+" â†’ "New repository".
ÐÐ°Ð·Ð¾Ð²Ð¸: tg-emoji-status-bot (Ð¸Ð»Ð¸ Ð»ÑŽÐ±Ð¾Ðµ).
Ð¡Ð´ÐµÐ»Ð°Ð¹ "Public" (Ð±ÐµÑÐ¿Ð»Ð°Ñ‚Ð½Ð¾).
ÐÐ°Ð¶Ð¼Ð¸ "Create repository".

Ð¢ÐµÐ¿ÐµÑ€ÑŒ Ð´Ð¾Ð±Ð°Ð²ÑŒ Ñ„Ð°Ð¹Ð»Ñ‹ (Ñ‡ÐµÑ€ÐµÐ· "Add file" â†’ "Create new file"):

Ð¤Ð°Ð¹Ð» 1: main.py (Ð²ÑÑ‚Ð°Ð²ÑŒ Ð²ÐµÑÑŒ ÐºÐ¾Ð´ Ð½Ð¸Ð¶Ðµ)
import os
import asyncio
from datetime import datetime
from quart import Quart
from telethon import TelegramClient, functions, types
from telethon.sessions import StringSession

app = Quart(__name__)

# ÐšÐ»ÑŽÑ‡Ð¸ Ð¸Ð· Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ñ… (Ð½Ðµ Ð²ÑÑ‚Ð°Ð²Ð»ÑÐ¹ ÑÑŽÐ´Ð°, Ð¾Ð½Ð¸ Ð² Railway)
api_id = int(os.environ['API_ID'])
api_hash = os.environ['API_HASH']
session_string = os.environ['SESSION_STRING']

client = TelegramClient(StringSession(session_string), api_id, api_hash)

# Ð­Ð¼Ð¾Ð´Ð·Ð¸ Ð´Ð»Ñ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ð¹ (Ð¸Ð·Ð¼ÐµÐ½Ð¸ Ð½Ð° ÑÐ²Ð¾Ð¸ Ð»ÑŽÐ±Ð¸Ð¼Ñ‹Ðµ!)
emoji_map = {
    'morning': 'â˜•',      # Ð£Ñ‚Ñ€Ð¾
    'day': 'â˜€ï¸',         # Ð”ÐµÐ½ÑŒ
    'evening': 'ðŸŒ†',     # Ð’ÐµÑ‡ÐµÑ€
    'night': 'ðŸŒ™',       # ÐÐ¾Ñ‡ÑŒ
    'breakfast': 'ðŸ³',   # Ð—Ð°Ð²Ñ‚Ñ€Ð°Ðº
    'transit': 'ðŸš—',     # Ð’ Ð¿ÑƒÑ‚Ð¸
    'weekend': 'ðŸ–ï¸'     # Ð’Ñ‹Ñ…Ð¾Ð´Ð½Ñ‹Ðµ
}

emoji_cache = {}

async def get_document_id(emoji_unicode: str) -> int:
    if emoji_unicode in emoji_cache:
        return emoji_cache[emoji_unicode]
    result = await client(functions.messages.SearchCustomEmojiRequest(emoticon=emoji_unicode, hash=0))
    if result.document_id:
        doc_id = result.document_id[0]
        emoji_cache[emoji_unicode] = doc_id
        return doc_id
    raise ValueError(f"Ð­Ð¼Ð¾Ð´Ð·Ð¸ '{emoji_unicode}' Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½. ÐŸÐ¾Ð¿Ñ€Ð¾Ð±ÑƒÐ¹ Ð´Ñ€ÑƒÐ³Ð¾Ð¹!")

async def update_status(state: str):
    if state not in emoji_map:
        raise ValueError(f"ÐÐµÐ¸Ð·Ð²ÐµÑÑ‚Ð½Ð¾Ðµ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ðµ: {state}")
    emoji = emoji_map[state]
    doc_id = await get_document_id(emoji)
    await client(functions.account.UpdateEmojiStatusRequest(
        emoji_status=types.EmojiStatus(document_id=doc_id)
    ))
    print(f"Ð¡Ñ‚Ð°Ñ‚ÑƒÑ Ð¸Ð·Ð¼ÐµÐ½Ñ‘Ð½ Ð½Ð° {state} ({emoji})")

async def periodic_update():
    while True:
        now = datetime.utcnow()  # Ð’Ñ€ÐµÐ¼Ñ ÑÐµÑ€Ð²ÐµÑ€Ð° (UTC, Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ ÐµÑÐ»Ð¸ Ð½ÑƒÐ¶Ð½Ð¾)
        hour = now.hour
        minute = now.minute
        weekday = now.weekday()  # 0=ÐŸÐ½, 5=Ð¡Ð±, 6=Ð’Ñ

        if weekday >= 5:  # Ð’Ñ‹Ñ…Ð¾Ð´Ð½Ñ‹Ðµ
            state = 'weekend'
        else:
            time_min = hour * 60 + minute
            if 420 <= time_min < 430:  # 7:00-7:10
                state = 'breakfast'
            elif (430 <= time_min < 480) or (1020 <= time_min < 1080):  # 7:10-8:00 Ð¸Ð»Ð¸ 17:00-18:00
                state = 'transit'
            elif 6 <= hour < 12:
                state = 'morning'
            elif 12 <= hour < 18:
                state = 'day'
            elif 18 <= hour < 22:
                state = 'evening'
            else:
                state = 'night'

        try:
            await update_status(state)
        except Exception as e:
            print(f"ÐžÑˆÐ¸Ð±ÐºÐ°: {e}")

        await asyncio.sleep(600)  # Ð–Ð´Ð°Ñ‚ÑŒ 10 Ð¼Ð¸Ð½ÑƒÑ‚

@app.before_serving
async def startup():
    await client.connect()
    if not await client.is_user_authorized():
        raise RuntimeError("Ð¡ÐµÑÑÐ¸Ñ Ð½Ðµ Ð°Ð²Ñ‚Ð¾Ñ€Ð¸Ð·Ð¾Ð²Ð°Ð½Ð°! ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒ SESSION_STRING")
    print("Telethon Ð³Ð¾Ñ‚Ð¾Ð²!")
    asyncio.create_task(periodic_update())  # Ð—Ð°Ð¿ÑƒÑÐº Ñ†Ð¸ÐºÐ»Ð°

@app.after_serving
async def shutdown():
    await client.disconnect()
    print("Telethon Ð¾Ñ‚ÐºÐ»ÑŽÑ‡Ñ‘Ð½")

if __name__ == '__main__':
    port = int(os.environ.get('PORT', 8080))
    app.run(host='0.0.0.0', port=port)

Ð¤Ð°Ð¹Ð» 2: requirements.txttextquart
telethon
Ð¤Ð°Ð¹Ð» 3: Procfile (Ð±ÐµÐ· Ñ€Ð°ÑÑˆÐ¸Ñ€ÐµÐ½Ð¸Ñ)textweb: python main.py

ÐŸÐ¾ÑÐ»Ðµ ÐºÐ°Ð¶Ð´Ð¾Ð³Ð¾ Ñ„Ð°Ð¹Ð»Ð° Ð½Ð°Ð¶Ð¼Ð¸ "Commit new file" Ð²Ð½Ð¸Ð·Ñƒ (Ð¿Ð¸ÑˆÐ¸ "Added main.py" Ð¸ Ñ‚.Ð´.).
Ð¨Ð°Ð³ 4: Ð Ð°Ð·Ð²ÐµÑ€Ð½Ð¸ Ð½Ð° Railway
Railway â€” Ð±ÐµÑÐ¿Ð»Ð°Ñ‚Ð½Ñ‹Ð¹ ÑÐµÑ€Ð²ÐµÑ€, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹ Ð·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ ÑÐºÑ€Ð¸Ð¿Ñ‚.

Ð—Ð°Ð¹Ð´Ð¸ Ð½Ð° railway.app â†’ "Sign in with GitHub".
ÐÐ° Ð³Ð»Ð°Ð²Ð½Ð¾Ð¹: "New Project" â†’ "Deploy from GitHub repo" â†’ Ð²Ñ‹Ð±ÐµÑ€Ð¸ ÑÐ²Ð¾Ð¹ Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¹ (tg-emoji-status-bot).
Railway ÑÐ¾Ð±ÐµÑ€Ñ‘Ñ‚ Ð¿Ñ€Ð¾ÐµÐºÑ‚ (1â€“2 Ð¼Ð¸Ð½ÑƒÑ‚Ñ‹).
ÐŸÐ¾ÑÐ»Ðµ: Ð—Ð°Ð¹Ð´Ð¸ Ð² Ð¿Ñ€Ð¾ÐµÐºÑ‚ â†’ "Variables" (Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ) â†’ "Add Variable":
API_ID = Ñ‚Ð²Ð¾Ð¹ api_id (Ñ‡Ð¸ÑÐ»Ð¾ Ð¸Ð· ÑˆÐ°Ð³Ð° 1).
API_HASH = Ñ‚Ð²Ð¾Ð¹ api_hash (ÑÑ‚Ñ€Ð¾ÐºÐ° Ð¸Ð· ÑˆÐ°Ð³Ð° 1).
SESSION_STRING = Ð´Ð»Ð¸Ð½Ð½Ð°Ñ ÑÑ‚Ñ€Ð¾ÐºÐ° Ð¸Ð· ÑˆÐ°Ð³Ð° 2 (ÑÐ´ÐµÐ»Ð°Ð¹ "Encrypted" Ð´Ð»Ñ Ð±ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾ÑÑ‚Ð¸).

ÐÐ°Ð¶Ð¼Ð¸ "Redeploy" (Ð²ÐºÐ»Ð°Ð´ÐºÐ° Deployments).
ÐŸÐ¾Ð´Ð¾Ð¶Ð´Ð¸: Ð’ "Logs" ÑƒÐ²Ð¸Ð´Ð¸ÑˆÑŒ "Telethon Ð³Ð¾Ñ‚Ð¾Ð²!" Ð¸ Ñ‡ÐµÑ€ÐµÐ· 10 Ð¼Ð¸Ð½ "Ð¡Ñ‚Ð°Ñ‚ÑƒÑ Ð¸Ð·Ð¼ÐµÐ½Ñ‘Ð½ Ð½Ð° ...".

Ð“Ð¾Ñ‚Ð¾Ð²Ð¾! Ð¡ÐµÑ€Ð²ÐµÑ€ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚. Ð¢Ð²Ð¾Ð¹ Ð¿ÑƒÐ±Ð»Ð¸Ñ‡Ð½Ñ‹Ð¹ URL (Ð´Ð»Ñ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸) â€” Ð² Ð¿Ñ€Ð¾ÐµÐºÑ‚Ðµ Railway (Ñ‚Ð¸Ð¿Ð° https://tg-emoji-status-bot-production.up.railway.app).
Ð¨Ð°Ð³ 5: ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ ÑÐ¼Ð¾Ð´Ð·Ð¸ Ð¸ Ñ€Ð°ÑÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ

Ð­Ð¼Ð¾Ð´Ð·Ð¸: Ð’ main.py Ð¸Ð·Ð¼ÐµÐ½Ð¸ Ð² emoji_map ÑÐ¸Ð¼Ð²Ð¾Ð»Ñ‹ Ð½Ð° ÑÐ²Ð¾Ð¸ (ÐºÐ¾Ð¿Ð¸Ñ€ÑƒÐ¹ Ð¸Ð· Telegram). Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸, commit Ð² GitHub â†’ Railway Ð¾Ð±Ð½Ð¾Ð²Ð¸Ñ‚ÑÑ.
Ð Ð°ÑÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ: Ð’ periodic_update() Ð¸Ð·Ð¼ÐµÐ½Ð¸ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð° (Ð² Ð¼Ð¸Ð½ÑƒÑ‚Ð°Ñ…, ÐºÐ°Ðº Ð² ÐºÐ¾Ð´Ðµ). ÐÐ°Ð¿Ñ€Ð¸Ð¼ÐµÑ€, ÑƒÑ‚Ñ€Ð¾ Ñ 7 Ð´Ð¾ 11: if 7 <= hour < 11: state = 'morning'. Ð’Ñ€ÐµÐ¼Ñ UTC (Ð½Ð° 3 Ñ‡Ð°ÑÐ° Ð¼ÐµÐ½ÑŒÑˆÐµ ÐœÐ¾ÑÐºÐ²Ñ‹ â€” Ð´Ð¾Ð±Ð°Ð²ÑŒ now = datetime.now() + timedelta(hours=3) Ð´Ð»Ñ Ñ‚Ð²Ð¾ÐµÐ¹ Ð·Ð¾Ð½Ñ‹).
Ð§Ð°ÑÑ‚Ð¾Ñ‚Ð°:await asyncio.sleep(600) â€” 600 ÑÐµÐºÑƒÐ½Ð´ = 10 Ð¼Ð¸Ð½. Ð˜Ð·Ð¼ÐµÐ½Ð¸ Ð½Ð° 300 Ð´Ð»Ñ 5 Ð¼Ð¸Ð½.

Ð¨Ð°Ð³ 6: Ð¢ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð¸ Ñ‡Ñ‚Ð¾ Ð´ÐµÐ»Ð°Ñ‚ÑŒ, ÐµÑÐ»Ð¸ Ð½Ðµ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚

ÐŸÐ¾Ð´Ð¾Ð¶Ð´Ð¸ 10 Ð¼Ð¸Ð½ â†’ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑŒ Ð¿Ñ€Ð¾Ñ„Ð¸Ð»ÑŒ Telegram (Ð² Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ð¸ Ð¾Ð±Ð½Ð¾Ð²Ð¸).
Ð’ Ð»Ð¾Ð³Ð°Ñ… Railway (Deployments â†’ Logs) Ð¸Ñ‰Ð¸ "Ð¡Ñ‚Ð°Ñ‚ÑƒÑ Ð¸Ð·Ð¼ÐµÐ½Ñ‘Ð½" Ð¸Ð»Ð¸ Ð¾ÑˆÐ¸Ð±ÐºÐ¸.
Ð•ÑÐ»Ð¸ Ð¾ÑˆÐ¸Ð±ÐºÐ° "Ð­Ð¼Ð¾Ð´Ð·Ð¸ Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½" â€” Ð¸Ð·Ð¼ÐµÐ½Ð¸ ÑÐ¼Ð¾Ð´Ð·Ð¸ Ð½Ð° Ð¿Ñ€Ð¾ÑÑ‚Ð¾Ð¹ (Ñ‚Ð¸Ð¿Ð° â¤ï¸).
Ð•ÑÐ»Ð¸ ÑÐµÑÑÐ¸Ñ ÑÐ»ÐµÑ‚ÐµÐ»Ð° â€” Ð·Ð°Ð½Ð¾Ð²Ð¾ ÑÐ´ÐµÐ»Ð°Ð¹ ÑˆÐ°Ð³ 2 Ð¸ Ð¾Ð±Ð½Ð¾Ð²Ð¸ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½ÑƒÑŽ Ð² Railway â†’ Redeploy.
Ð•ÑÐ»Ð¸ ÑÐµÑ€Ð²ÐµÑ€ "ÑÐ¿Ð¸Ñ‚" (Ð±ÐµÑÐ¿Ð»Ð°Ñ‚Ð½Ñ‹Ð¹ Ñ‚Ð°Ñ€Ð¸Ñ„) â€” ÑÑ‚Ð¾ Ð½Ð¾Ñ€Ð¼Ð°Ð»ÑŒÐ½Ð¾, Ð¿Ñ€Ð¾ÑÑ‹Ð¿Ð°ÐµÑ‚ÑÑ Ð·Ð° ÑÐµÐºÑƒÐ½Ð´Ñ‹.

Ð“Ð¾Ñ‚Ð¾Ð²Ð¾! Ð¢ÐµÐ¿ÐµÑ€ÑŒ Ñ‚Ð²Ð¾Ð¹ ÑÑ‚Ð°Ñ‚ÑƒÑ Ð¼ÐµÐ½ÑÐµÑ‚ÑÑ ÑÐ°Ð¼. Ð•ÑÐ»Ð¸ Ñ…Ð¾Ñ‡ÐµÑˆÑŒ Ð´Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð±Ð¾Ð»ÑŒÑˆÐµ Ñ„Ð¸Ñ‡ (Ñ‚Ð¸Ð¿Ð° ÑÐ±Ñ€Ð¾ÑÐ° ÑÑ‚Ð°Ñ‚ÑƒÑÐ°) â€” ÑÐºÐ°Ð¶Ð¸. Ð£Ð´Ð°Ñ‡Ð¸! ðŸŒŸ
